# ğŸš¨ ì¦‰ì‹œ ë°°í¬ ëª…ë ¹ì–´ - CSP blob: ë¬¸ì œ í•´ê²°

## ğŸ“‹ **í˜„ì¬ ìƒí™©**
- ë°°í¬ëœ ì›¹ ì•±ì—ì„œ `blob:` URLì´ ì—¬ì „íˆ ì°¨ë‹¨ë¨
- CSP ì—ëŸ¬: `img-src 'self' data: https:` (blob: ëˆ„ë½)
- ì¦‰ì‹œ ìˆ˜ì •ì´ í•„ìš”í•œ ìƒí™©

## ğŸš€ **ì¦‰ì‹œ ì‹¤í–‰í•  ëª…ë ¹ì–´ë“¤**

### 1. **ë°°í¬ ì„œë²„ì— ì ‘ì†**
```bash
# ë°°í¬ ì„œë²„ (210.117.181.115)ì— SSH ì ‘ì†
ssh user@210.117.181.115
```

### 2. **ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì¤‘ì§€**
```bash
# í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì›¹ ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker-compose down
# ë˜ëŠ”
docker stop heritage-web
```

### 3. **ìƒˆë¡œìš´ íŒŒì¼ë“¤ ì—…ë¡œë“œ**
```bash
# csp_fix_deploy.tar.gz íŒŒì¼ì„ ì„œë²„ì— ì—…ë¡œë“œí•œ í›„:
tar -xzf csp_fix_deploy.tar.gz

# ì›¹ ì•± íŒŒì¼ ë³µì‚¬
cp -r my_cross_app/build/web/* /path/to/your/web/directory/

# Nginx ì„¤ì • ë³µì‚¬
cp nginx.conf /etc/nginx/conf.d/default.conf
# ë˜ëŠ” Docker ë³¼ë¥¨ì— ë³µì‚¬
```

### 4. **Nginx ì„¤ì • ê°•ì œ ì ìš©**
```bash
# Nginx ì„¤ì • í…ŒìŠ¤íŠ¸
nginx -t

# Nginx ì¬ì‹œì‘
systemctl restart nginx
# ë˜ëŠ” Docker ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose up -d heritage-web
```

### 5. **ì¦‰ì‹œ í…ŒìŠ¤íŠ¸**
```bash
# ì›¹ ì•± ì ‘ì† í›„ ê°•ì œ ìƒˆë¡œê³ ì¹¨
# http://210.117.181.115:3001/#/home
# Ctrl+Shift+R (ìºì‹œ ì‚­ì œ)
```

## ğŸ”§ **Docker Compose ì‚¬ìš© ì‹œ**

### A. ì „ì²´ ì¬ë°°í¬
```bash
cd /home/carrotsw/heritage_services_app
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

### B. ì›¹ ì•±ë§Œ ì¬ë°°í¬
```bash
# ì›¹ ì»¨í…Œì´ë„ˆë§Œ ì¬ë¹Œë“œ
docker-compose build --no-cache heritage-web
docker-compose up -d heritage-web

# ë¡œê·¸ í™•ì¸
docker-compose logs heritage-web
```

## ğŸ¯ **ì„±ê³µ í™•ì¸ ë°©ë²•**

### 1. **ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬**
- F12 â†’ Console íƒ­
- CSP ì—ëŸ¬ê°€ ì‚¬ë¼ì¡ŒëŠ”ì§€ í™•ì¸
- `blob:` URLì´ `(blocked:csp)` ì—†ì´ ë¡œë“œë˜ëŠ”ì§€ í™•ì¸

### 2. **Network íƒ­ í™•ì¸**
- `blob:` ìš”ì²­ì´ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ëŠ”ì§€ í™•ì¸
- Statusê°€ `200` ë˜ëŠ” ì •ìƒ ìƒíƒœì¸ì§€ í™•ì¸

### 3. **ì´ë¯¸ì§€ í‘œì‹œ í™•ì¸**
- ë¬¸í™”ìœ ì‚° ì‚¬ì§„ì´ ê¹¨ì§„ ì•„ì´ì½˜ ëŒ€ì‹  ì‹¤ì œ ì‚¬ì§„ì´ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸

## ğŸš¨ **ì—¬ì „íˆ ë¬¸ì œê°€ ìˆë‹¤ë©´**

### 1. **ê°•ë ¥í•œ CSP ìš°íšŒ (ì„ì‹œ)**
```nginx
# nginx.confì— ì¶”ê°€
add_header Content-Security-Policy "default-src *; img-src *; media-src *; script-src *; style-src *; font-src *;" always;
```

### 2. **CSP ì™„ì „ ë¹„í™œì„±í™” (ì„ì‹œ)**
```nginx
# nginx.confì—ì„œ CSP í—¤ë” ì œê±°
# add_header Content-Security-Policy ... ì¤„ì„ ì£¼ì„ ì²˜ë¦¬
```

### 3. **ìºì‹œ ì™„ì „ ì‚­ì œ**
```bash
# ë¸Œë¼ìš°ì €ì—ì„œ:
# 1. Ctrl+Shift+Delete
# 2. "ëª¨ë“  ì‹œê°„" ì„ íƒ
# 3. "ìºì‹œëœ ì´ë¯¸ì§€ ë° íŒŒì¼" ì²´í¬
# 4. ì‚­ì œ í›„ ì¬ì ‘ì†
```

## ğŸ“ **ë°°í¬ íŒŒì¼ ëª©ë¡**

- âœ… `csp_fix_deploy.tar.gz` - ìˆ˜ì •ëœ ì›¹ ì•± + Nginx ì„¤ì •
- âœ… `my_cross_app/build/web/index.html` - blob: í¬í•¨ëœ CSP ì„¤ì •
- âœ… `nginx.conf` - ê°•í™”ëœ CSP í—¤ë” ì„¤ì •
- âœ… `docker-compose.yml` - ì»¨í…Œì´ë„ˆ ì„¤ì •

## âš¡ **ì¦‰ì‹œ ì‹¤í–‰ ìˆœì„œ**

1. **ì„œë²„ ì ‘ì†** â†’ `ssh user@210.117.181.115`
2. **ì»¨í…Œì´ë„ˆ ì¤‘ì§€** â†’ `docker-compose down`
3. **íŒŒì¼ ì—…ë¡œë“œ** â†’ `csp_fix_deploy.tar.gz` ì—…ë¡œë“œ ë° ì••ì¶• í•´ì œ
4. **ì„¤ì • ì ìš©** â†’ Nginx ì„¤ì • ë³µì‚¬ ë° ì¬ì‹œì‘
5. **ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘** â†’ `docker-compose up -d`
6. **í…ŒìŠ¤íŠ¸** â†’ ë¸Œë¼ìš°ì €ì—ì„œ `Ctrl+Shift+R` í›„ ì´ë¯¸ì§€ í™•ì¸

ì´ì œ `blob:` URLì´ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë  ê²ƒì…ë‹ˆë‹¤! ğŸ‰
