# ğŸš€ í˜„ì¬ ì½”ë“œ ë°°í¬ ì‹¤í–‰ ê°€ì´ë“œ

## ğŸ“¦ **ë°°í¬ íŒŒì¼ ì •ë³´**
- **íŒŒì¼ëª…**: `final_csp_fix.tar.gz`
- **í¬ê¸°**: 11MB
- **í¬í•¨ íŒŒì¼**: 45ê°œ
- **ì£¼ìš” ë‚´ìš©**: CSP ì™„ì „ ìš°íšŒëœ ì›¹ ì•± + Nginx ì„¤ì •

## ğŸ¯ **ë°°í¬ ëª©í‘œ**
- CSP `blob:` URL ì°¨ë‹¨ ë¬¸ì œ í•´ê²°
- ë°°í¬ëœ í™˜ê²½ì—ì„œ ì´ë¯¸ì§€ ì •ìƒ í‘œì‹œ
- `http://210.117.181.115:3001/#/home`ì—ì„œ ì´ë¯¸ì§€ í™•ì¸

## ğŸš€ **ë°°í¬ ì‹¤í–‰ ëª…ë ¹ì–´**

### 1. **ë°°í¬ ì„œë²„ ì ‘ì†**
```bash
# ë°°í¬ ì„œë²„ (210.117.181.115)ì— SSH ì ‘ì†
ssh user@210.117.181.115
```

### 2. **ê¸°ì¡´ ì„œë¹„ìŠ¤ ì¤‘ì§€**
```bash
# Docker ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker-compose down

# ë˜ëŠ” ê°œë³„ ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker stop heritage-web heritage-api
docker rm heritage-web heritage-api
```

### 3. **ìƒˆ íŒŒì¼ ì—…ë¡œë“œ ë° ì ìš©**
```bash
# final_csp_fix.tar.gz íŒŒì¼ì„ ì„œë²„ì— ì—…ë¡œë“œí•œ í›„:
tar -xzf final_csp_fix.tar.gz

# ì›¹ ì•± íŒŒì¼ ë³µì‚¬ (ê¸°ì¡´ íŒŒì¼ ë®ì–´ì“°ê¸°)
cp -r my_cross_app/build/web/* /path/to/your/web/directory/

# Nginx ì„¤ì • ì ìš©
cp nginx.conf /etc/nginx/conf.d/default.conf
nginx -t
systemctl restart nginx
```

### 4. **Docker ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘**
```bash
# ì „ì²´ ì¬ì‹œì‘
docker-compose up -d

# ìƒíƒœ í™•ì¸
docker-compose ps
docker-compose logs heritage-web
```

### 5. **í…ŒìŠ¤íŠ¸ ë° í™•ì¸**
```bash
# ì›¹ ì•± ì ‘ì†
# http://210.117.181.115:3001/#/home

# ê°•ì œ ìƒˆë¡œê³ ì¹¨ (ìºì‹œ ì‚­ì œ)
# Ctrl+Shift+R

# ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ í™•ì¸
# F12 â†’ Console íƒ­ì—ì„œ CSP ì—ëŸ¬ í™•ì¸
# F12 â†’ Network íƒ­ì—ì„œ blob: URL ë¡œë“œ í™•ì¸
```

## ğŸ”§ **ì£¼ìš” ë³€ê²½ì‚¬í•­**

### A. CSP ì™„ì „ ìš°íšŒ ì„¤ì •
```nginx
# nginx.conf
add_header Content-Security-Policy "
    default-src *;
    img-src * data: blob:;
    media-src * data: blob:;
    connect-src *;
    script-src * 'unsafe-inline' 'unsafe-eval';
    style-src * 'unsafe-inline';
    font-src * data:;
    frame-ancestors *;
" always;
```

### B. Flutter ì›¹ ì•± CSP ì„¤ì •
```html
<!-- index.html -->
<meta http-equiv="Content-Security-Policy" content="default-src *; img-src * data: blob:; media-src * data: blob:; connect-src *; script-src * 'unsafe-inline' 'unsafe-eval'; style-src * 'unsafe-inline'; font-src * data:; frame-ancestors *;">
```

## âœ… **ì„±ê³µ í™•ì¸ ê¸°ì¤€**

### 1. **ë¸Œë¼ìš°ì € ì½˜ì†”**
- CSP ì—ëŸ¬ê°€ ì™„ì „íˆ ì‚¬ë¼ì§
- `blob:` URLì´ `(blocked:csp)` ì—†ì´ ë¡œë“œë¨

### 2. **ì´ë¯¸ì§€ í‘œì‹œ**
- ë¬¸í™”ìœ ì‚° ì‚¬ì§„ì´ ê¹¨ì§„ ì•„ì´ì½˜ ëŒ€ì‹  ì‹¤ì œ ì‚¬ì§„ì´ í‘œì‹œë¨
- ëª¨ë“  ì´ë¯¸ì§€ ì†ŒìŠ¤ê°€ ì •ìƒ ì‘ë™

### 3. **Network íƒ­**
- `blob:` ìš”ì²­ì´ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë¨
- Statusê°€ `200` ë˜ëŠ” ì •ìƒ ìƒíƒœ

## ğŸš¨ **ë¬¸ì œ í•´ê²°**

### ì—¬ì „íˆ ì´ë¯¸ì§€ê°€ ê¹¨ì§„ë‹¤ë©´:
1. **ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ**: `Ctrl+Shift+Delete` â†’ ëª¨ë“  ì‹œê°„ â†’ ëª¨ë“  í•­ëª© ì²´í¬
2. **ì‹œí¬ë¦¿ ëª¨ë“œì—ì„œ í…ŒìŠ¤íŠ¸**: ìƒˆ ì‹œí¬ë¦¿ ì°½ì—ì„œ ì ‘ì†
3. **ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘**: `docker-compose restart heritage-web`
4. **Nginx ì„¤ì • í™•ì¸**: `nginx -t`ë¡œ ì„¤ì • ë¬¸ë²• í™•ì¸

## ğŸ“ **ë°°í¬ íŒŒì¼ êµ¬ì¡°**
```
final_csp_fix.tar.gz
â”œâ”€â”€ my_cross_app/build/web/          # CSP ì™„ì „ ìš°íšŒëœ ì›¹ ì•±
â”‚   â”œâ”€â”€ index.html                   # blob: í—ˆìš©ëœ CSP ì„¤ì •
â”‚   â”œâ”€â”€ flutter.js
â”‚   â”œâ”€â”€ canvaskit/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ nginx.conf                       # ì™„ì „ ìš°íšŒëœ CSP í—¤ë”
â””â”€â”€ docker-compose.yml              # ì»¨í…Œì´ë„ˆ ì„¤ì •
```

## ğŸ‰ **ì˜ˆìƒ ê²°ê³¼**

ë°°í¬ ì™„ë£Œ í›„:
- âœ… CSP ì—ëŸ¬ê°€ ì™„ì „íˆ ì‚¬ë¼ì§
- âœ… `blob:` URLì´ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë¨
- âœ… ì´ë¯¸ì§€ê°€ ê¹¨ì§„ ì•„ì´ì½˜ ëŒ€ì‹  ì‹¤ì œ ì‚¬ì§„ì´ í‘œì‹œë¨
- âœ… ëª¨ë“  ì´ë¯¸ì§€ ì†ŒìŠ¤ê°€ ì •ìƒ ì‘ë™

ì´ì œ ë°°í¬ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”! ğŸš€
